ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"lis2dw12_tap_single.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Core/Src/lis2dw12_tap_single.c"
  18              		.section	.bss.whoamI,"aw",%nobits
  21              	whoamI:
  22 0000 00       		.space	1
  23              		.section	.bss.rst,"aw",%nobits
  26              	rst:
  27 0000 00       		.space	1
  28              		.section	.bss.tx_buffer,"aw",%nobits
  29              		.align	2
  32              	tx_buffer:
  33 0000 00000000 		.space	1000
  33      00000000 
  33      00000000 
  33      00000000 
  33      00000000 
  34              		.section	.rodata
  35              		.align	2
  36              	.LC0:
  37 0000 54617020 		.ascii	"Tap detected on: \000"
  37      64657465 
  37      63746564 
  37      206F6E3A 
  37      2000
  38 0012 0000     		.align	2
  39              	.LC1:
  40 0014 0D0A00   		.ascii	"\015\012\000"
  41 0017 00       		.align	2
  42              	.LC2:
  43 0018 7800     		.ascii	"x\000"
  44 001a 0000     		.align	2
  45              	.LC3:
  46 001c 7900     		.ascii	"y\000"
  47 001e 0000     		.align	2
  48              	.LC4:
  49 0020 7A00     		.ascii	"z\000"
  50              		.section	.text.lis2dw12_single_tap,"ax",%progbits
  51              		.align	1
  52              		.global	lis2dw12_single_tap
  53              		.syntax unified
  54              		.thumb
  55              		.thumb_func
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 2


  57              	lis2dw12_single_tap:
  58              	.LFB68:
   1:Core/Src/lis2dw12_tap_single.c **** /*
   2:Core/Src/lis2dw12_tap_single.c ****  ******************************************************************************
   3:Core/Src/lis2dw12_tap_single.c ****  * @file    single_tap.c
   4:Core/Src/lis2dw12_tap_single.c ****  * @author  Sensors Software Solution Team
   5:Core/Src/lis2dw12_tap_single.c ****  * @brief   This file show the simplest way to detect single tap from sensor.
   6:Core/Src/lis2dw12_tap_single.c ****  *
   7:Core/Src/lis2dw12_tap_single.c ****  ******************************************************************************
   8:Core/Src/lis2dw12_tap_single.c ****  * @attention
   9:Core/Src/lis2dw12_tap_single.c ****  *
  10:Core/Src/lis2dw12_tap_single.c ****  * <h2><center>&copy; Copyright (c) 2020 STMicroelectronics.
  11:Core/Src/lis2dw12_tap_single.c ****  * All rights reserved.</center></h2>
  12:Core/Src/lis2dw12_tap_single.c ****  *
  13:Core/Src/lis2dw12_tap_single.c ****  * This software component is licensed by ST under BSD 3-Clause license,
  14:Core/Src/lis2dw12_tap_single.c ****  * the "License"; You may not use this file except in compliance with the
  15:Core/Src/lis2dw12_tap_single.c ****  * License. You may obtain a copy of the License at:
  16:Core/Src/lis2dw12_tap_single.c ****  *                        opensource.org/licenses/BSD-3-Clause
  17:Core/Src/lis2dw12_tap_single.c ****  *
  18:Core/Src/lis2dw12_tap_single.c ****  ******************************************************************************
  19:Core/Src/lis2dw12_tap_single.c ****  */
  20:Core/Src/lis2dw12_tap_single.c **** 
  21:Core/Src/lis2dw12_tap_single.c **** /*
  22:Core/Src/lis2dw12_tap_single.c ****  * This example was developed using the following STMicroelectronics
  23:Core/Src/lis2dw12_tap_single.c ****  * evaluation boards:
  24:Core/Src/lis2dw12_tap_single.c ****  *
  25:Core/Src/lis2dw12_tap_single.c ****  * - STEVAL_MKI109V3 + STEVAL-MKI179V1
  26:Core/Src/lis2dw12_tap_single.c ****  * - NUCLEO_F401RE + X_NUCLEO_IKS01A3
  27:Core/Src/lis2dw12_tap_single.c ****  * - DISCOVERY_SPC584B + X_NUCLEO_IKS01A3
  28:Core/Src/lis2dw12_tap_single.c ****  *
  29:Core/Src/lis2dw12_tap_single.c ****  * and STM32CubeMX tool with STM32CubeF4 MCU Package
  30:Core/Src/lis2dw12_tap_single.c ****  *
  31:Core/Src/lis2dw12_tap_single.c ****  * Used interfaces:
  32:Core/Src/lis2dw12_tap_single.c ****  *
  33:Core/Src/lis2dw12_tap_single.c ****  * STEVAL_MKI109V3    - Host side:   USB (Virtual COM)
  34:Core/Src/lis2dw12_tap_single.c ****  *                    - Sensor side: SPI(Default) / I2C(supported)
  35:Core/Src/lis2dw12_tap_single.c ****  *
  36:Core/Src/lis2dw12_tap_single.c ****  * NUCLEO_STM32F401RE - Host side: UART(COM) to USB bridge
  37:Core/Src/lis2dw12_tap_single.c ****  *                    - I2C(Default) / SPI(supported)
  38:Core/Src/lis2dw12_tap_single.c ****  *
  39:Core/Src/lis2dw12_tap_single.c ****  * DISCOVERY_SPC584B  - Host side: UART(COM) to USB bridge
  40:Core/Src/lis2dw12_tap_single.c ****  *                    - Sensor side: I2C(Default) / SPI(supported)
  41:Core/Src/lis2dw12_tap_single.c ****  *
  42:Core/Src/lis2dw12_tap_single.c ****  * If you need to run this example on a different hardware platform a
  43:Core/Src/lis2dw12_tap_single.c ****  * modification of the functions: `platform_write`, `platform_read`,
  44:Core/Src/lis2dw12_tap_single.c ****  * `tx_com` and 'platform_init' is required.
  45:Core/Src/lis2dw12_tap_single.c ****  *
  46:Core/Src/lis2dw12_tap_single.c ****  */
  47:Core/Src/lis2dw12_tap_single.c **** 
  48:Core/Src/lis2dw12_tap_single.c **** /* STMicroelectronics evaluation boards definition
  49:Core/Src/lis2dw12_tap_single.c ****  *
  50:Core/Src/lis2dw12_tap_single.c ****  * Please uncomment ONLY the evaluation boards in use.
  51:Core/Src/lis2dw12_tap_single.c ****  * If a different hardware is used please comment all
  52:Core/Src/lis2dw12_tap_single.c ****  * following target board and redefine yours.
  53:Core/Src/lis2dw12_tap_single.c ****  */
  54:Core/Src/lis2dw12_tap_single.c **** 
  55:Core/Src/lis2dw12_tap_single.c **** //#define STEVAL_MKI109V3  /* little endian */
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 3


  56:Core/Src/lis2dw12_tap_single.c **** //#define NUCLEO_F401RE    /* little endian */
  57:Core/Src/lis2dw12_tap_single.c **** //#define SPC584B_DIS      /* big endian */
  58:Core/Src/lis2dw12_tap_single.c **** #define NUCLEO_F103RB
  59:Core/Src/lis2dw12_tap_single.c **** 
  60:Core/Src/lis2dw12_tap_single.c **** /* ATTENTION: By default the driver is little endian. If you need switch
  61:Core/Src/lis2dw12_tap_single.c ****  *            to big endian please see "Endianness definitions" in the
  62:Core/Src/lis2dw12_tap_single.c ****  *            header file of the driver (_reg.h).
  63:Core/Src/lis2dw12_tap_single.c ****  */
  64:Core/Src/lis2dw12_tap_single.c **** 
  65:Core/Src/lis2dw12_tap_single.c **** 
  66:Core/Src/lis2dw12_tap_single.c **** /* Includes ------------------------------------------------------------------*/
  67:Core/Src/lis2dw12_tap_single.c **** #include <string.h>
  68:Core/Src/lis2dw12_tap_single.c **** #include <stdio.h>
  69:Core/Src/lis2dw12_tap_single.c **** #include "lis2dw12_reg.h"
  70:Core/Src/lis2dw12_tap_single.c **** #include "stm32f1xx_hal.h"
  71:Core/Src/lis2dw12_tap_single.c **** #include "uart.h"
  72:Core/Src/lis2dw12_tap_single.c **** #include <stdint.h>
  73:Core/Src/lis2dw12_tap_single.c **** 
  74:Core/Src/lis2dw12_tap_single.c **** 
  75:Core/Src/lis2dw12_tap_single.c **** /* Private macro -------------------------------------------------------------*/
  76:Core/Src/lis2dw12_tap_single.c **** #define    BOOT_TIME            20 //ms
  77:Core/Src/lis2dw12_tap_single.c **** 
  78:Core/Src/lis2dw12_tap_single.c **** /* Private variables ---------------------------------------------------------*/
  79:Core/Src/lis2dw12_tap_single.c **** static uint8_t whoamI, rst;
  80:Core/Src/lis2dw12_tap_single.c **** static uint8_t tx_buffer[1000];
  81:Core/Src/lis2dw12_tap_single.c **** 
  82:Core/Src/lis2dw12_tap_single.c **** /* Extern variables ----------------------------------------------------------*/
  83:Core/Src/lis2dw12_tap_single.c **** extern I2C_HandleTypeDef hi2c2;
  84:Core/Src/lis2dw12_tap_single.c **** /* Private functions ---------------------------------------------------------*/
  85:Core/Src/lis2dw12_tap_single.c **** /*
  86:Core/Src/lis2dw12_tap_single.c ****  *   WARNING:
  87:Core/Src/lis2dw12_tap_single.c ****  *   Functions declare in this section are defined at the end of this file
  88:Core/Src/lis2dw12_tap_single.c ****  *   and are strictly related to the hardware platform used.
  89:Core/Src/lis2dw12_tap_single.c ****  *
  90:Core/Src/lis2dw12_tap_single.c ****  */
  91:Core/Src/lis2dw12_tap_single.c **** static int32_t platform_write(void *handle, uint8_t reg, const uint8_t *bufp,
  92:Core/Src/lis2dw12_tap_single.c ****   uint16_t len);
  93:Core/Src/lis2dw12_tap_single.c **** static int32_t platform_read(void *handle, uint8_t reg, uint8_t *bufp,
  94:Core/Src/lis2dw12_tap_single.c ****  uint16_t len);
  95:Core/Src/lis2dw12_tap_single.c **** static void platform_delay(uint16_t ms);
  96:Core/Src/lis2dw12_tap_single.c **** 
  97:Core/Src/lis2dw12_tap_single.c **** 
  98:Core/Src/lis2dw12_tap_single.c **** /* Main Example --------------------------------------------------------------*/
  99:Core/Src/lis2dw12_tap_single.c **** void lis2dw12_single_tap(void)
 100:Core/Src/lis2dw12_tap_single.c **** {
  59              		.loc 1 100 1
  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 32
  62              		@ frame_needed = 1, uses_anonymous_args = 0
  63 0000 80B5     		push	{r7, lr}
  64              	.LCFI0:
  65              		.cfi_def_cfa_offset 8
  66              		.cfi_offset 7, -8
  67              		.cfi_offset 14, -4
  68 0002 88B0     		sub	sp, sp, #32
  69              	.LCFI1:
  70              		.cfi_def_cfa_offset 40
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 4


  71 0004 00AF     		add	r7, sp, #0
  72              	.LCFI2:
  73              		.cfi_def_cfa_register 7
 101:Core/Src/lis2dw12_tap_single.c ****   /* Initialize mems driver interface. */
 102:Core/Src/lis2dw12_tap_single.c ****   stmdev_ctx_t dev_ctx;
 103:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_reg_t int_route;
 104:Core/Src/lis2dw12_tap_single.c ****   dev_ctx.write_reg = platform_write;
  74              		.loc 1 104 21
  75 0006 614B     		ldr	r3, .L9
  76 0008 3B61     		str	r3, [r7, #16]
 105:Core/Src/lis2dw12_tap_single.c ****   dev_ctx.read_reg = platform_read;
  77              		.loc 1 105 20
  78 000a 614B     		ldr	r3, .L9+4
  79 000c 7B61     		str	r3, [r7, #20]
 106:Core/Src/lis2dw12_tap_single.c ****   dev_ctx.mdelay = platform_delay;
  80              		.loc 1 106 18
  81 000e 614B     		ldr	r3, .L9+8
  82 0010 BB61     		str	r3, [r7, #24]
 107:Core/Src/lis2dw12_tap_single.c ****   dev_ctx.handle = &hi2c2;
  83              		.loc 1 107 18
  84 0012 614B     		ldr	r3, .L9+12
  85 0014 FB61     		str	r3, [r7, #28]
 108:Core/Src/lis2dw12_tap_single.c ****   /* Initialize platform specific hardware */
 109:Core/Src/lis2dw12_tap_single.c ****   /* Wait sensor boot time */
 110:Core/Src/lis2dw12_tap_single.c ****   platform_delay(BOOT_TIME);
  86              		.loc 1 110 3
  87 0016 1420     		movs	r0, #20
  88 0018 FFF7FEFF 		bl	platform_delay
 111:Core/Src/lis2dw12_tap_single.c ****   /* Check device ID */
 112:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_device_id_get(&dev_ctx, &whoamI);
  89              		.loc 1 112 3
  90 001c 07F11003 		add	r3, r7, #16
  91 0020 5E49     		ldr	r1, .L9+16
  92 0022 1846     		mov	r0, r3
  93 0024 FFF7FEFF 		bl	lis2dw12_device_id_get
 113:Core/Src/lis2dw12_tap_single.c **** 
 114:Core/Src/lis2dw12_tap_single.c ****   if (whoamI != LIS2DW12_ID)
  94              		.loc 1 114 14
  95 0028 5C4B     		ldr	r3, .L9+16
  96 002a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  97              		.loc 1 114 6
  98 002c 442B     		cmp	r3, #68
  99 002e 01D0     		beq	.L2
 100              	.L3:
 115:Core/Src/lis2dw12_tap_single.c ****     while (1) {
 101              		.loc 1 115 11 discriminator 1
 102 0030 00BF     		nop
 103 0032 FDE7     		b	.L3
 104              	.L2:
 116:Core/Src/lis2dw12_tap_single.c ****       /* manage here device not found */
 117:Core/Src/lis2dw12_tap_single.c ****     }
 118:Core/Src/lis2dw12_tap_single.c **** 
 119:Core/Src/lis2dw12_tap_single.c ****   /* Restore default configuration */
 120:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_reset_set(&dev_ctx, PROPERTY_ENABLE);
 105              		.loc 1 120 3
 106 0034 07F11003 		add	r3, r7, #16
 107 0038 0121     		movs	r1, #1
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 5


 108 003a 1846     		mov	r0, r3
 109 003c FFF7FEFF 		bl	lis2dw12_reset_set
 110              	.L4:
 121:Core/Src/lis2dw12_tap_single.c **** 
 122:Core/Src/lis2dw12_tap_single.c ****   do {
 123:Core/Src/lis2dw12_tap_single.c ****     lis2dw12_reset_get(&dev_ctx, &rst);
 111              		.loc 1 123 5 discriminator 1
 112 0040 07F11003 		add	r3, r7, #16
 113 0044 5649     		ldr	r1, .L9+20
 114 0046 1846     		mov	r0, r3
 115 0048 FFF7FEFF 		bl	lis2dw12_reset_get
 124:Core/Src/lis2dw12_tap_single.c ****   } while (rst);
 116              		.loc 1 124 12 discriminator 1
 117 004c 544B     		ldr	r3, .L9+20
 118 004e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 119 0050 002B     		cmp	r3, #0
 120 0052 F5D1     		bne	.L4
 125:Core/Src/lis2dw12_tap_single.c **** 
 126:Core/Src/lis2dw12_tap_single.c ****   /* Set full scale */
 127:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_full_scale_set(&dev_ctx, LIS2DW12_2g);
 121              		.loc 1 127 3
 122 0054 07F11003 		add	r3, r7, #16
 123 0058 0021     		movs	r1, #0
 124 005a 1846     		mov	r0, r3
 125 005c FFF7FEFF 		bl	lis2dw12_full_scale_set
 128:Core/Src/lis2dw12_tap_single.c ****   /* Configure power mode */
 129:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_power_mode_set(&dev_ctx,
 126              		.loc 1 129 3
 127 0060 07F11003 		add	r3, r7, #16
 128 0064 1021     		movs	r1, #16
 129 0066 1846     		mov	r0, r3
 130 0068 FFF7FEFF 		bl	lis2dw12_power_mode_set
 130:Core/Src/lis2dw12_tap_single.c ****                           LIS2DW12_CONT_LOW_PWR_LOW_NOISE_12bit);
 131:Core/Src/lis2dw12_tap_single.c ****   /* Set Output Data Rate */
 132:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_data_rate_set(&dev_ctx, LIS2DW12_XL_ODR_400Hz);
 131              		.loc 1 132 3
 132 006c 07F11003 		add	r3, r7, #16
 133 0070 0721     		movs	r1, #7
 134 0072 1846     		mov	r0, r3
 135 0074 FFF7FEFF 		bl	lis2dw12_data_rate_set
 133:Core/Src/lis2dw12_tap_single.c ****   /* Enable Tap detection on X, Y, Z */
 134:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_tap_detection_on_z_set(&dev_ctx, PROPERTY_ENABLE);
 136              		.loc 1 134 3
 137 0078 07F11003 		add	r3, r7, #16
 138 007c 0121     		movs	r1, #1
 139 007e 1846     		mov	r0, r3
 140 0080 FFF7FEFF 		bl	lis2dw12_tap_detection_on_z_set
 135:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_tap_detection_on_y_set(&dev_ctx, PROPERTY_ENABLE);
 141              		.loc 1 135 3
 142 0084 07F11003 		add	r3, r7, #16
 143 0088 0121     		movs	r1, #1
 144 008a 1846     		mov	r0, r3
 145 008c FFF7FEFF 		bl	lis2dw12_tap_detection_on_y_set
 136:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_tap_detection_on_x_set(&dev_ctx, PROPERTY_ENABLE);
 146              		.loc 1 136 3
 147 0090 07F11003 		add	r3, r7, #16
 148 0094 0121     		movs	r1, #1
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 6


 149 0096 1846     		mov	r0, r3
 150 0098 FFF7FEFF 		bl	lis2dw12_tap_detection_on_x_set
 137:Core/Src/lis2dw12_tap_single.c ****   /* Set Tap threshold on all axis */
 138:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_tap_threshold_x_set(&dev_ctx, 9);
 151              		.loc 1 138 3
 152 009c 07F11003 		add	r3, r7, #16
 153 00a0 0921     		movs	r1, #9
 154 00a2 1846     		mov	r0, r3
 155 00a4 FFF7FEFF 		bl	lis2dw12_tap_threshold_x_set
 139:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_tap_threshold_y_set(&dev_ctx, 9);
 156              		.loc 1 139 3
 157 00a8 07F11003 		add	r3, r7, #16
 158 00ac 0921     		movs	r1, #9
 159 00ae 1846     		mov	r0, r3
 160 00b0 FFF7FEFF 		bl	lis2dw12_tap_threshold_y_set
 140:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_tap_threshold_z_set(&dev_ctx, 9);
 161              		.loc 1 140 3
 162 00b4 07F11003 		add	r3, r7, #16
 163 00b8 0921     		movs	r1, #9
 164 00ba 1846     		mov	r0, r3
 165 00bc FFF7FEFF 		bl	lis2dw12_tap_threshold_z_set
 141:Core/Src/lis2dw12_tap_single.c ****   /* Configure Single Tap parameter */
 142:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_tap_quiet_set(&dev_ctx, 1);
 166              		.loc 1 142 3
 167 00c0 07F11003 		add	r3, r7, #16
 168 00c4 0121     		movs	r1, #1
 169 00c6 1846     		mov	r0, r3
 170 00c8 FFF7FEFF 		bl	lis2dw12_tap_quiet_set
 143:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_tap_shock_set(&dev_ctx, 2);
 171              		.loc 1 143 3
 172 00cc 07F11003 		add	r3, r7, #16
 173 00d0 0221     		movs	r1, #2
 174 00d2 1846     		mov	r0, r3
 175 00d4 FFF7FEFF 		bl	lis2dw12_tap_shock_set
 144:Core/Src/lis2dw12_tap_single.c ****   /* Enable Single Tap detection only */
 145:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_tap_mode_set(&dev_ctx, LIS2DW12_ONLY_SINGLE);
 176              		.loc 1 145 3
 177 00d8 07F11003 		add	r3, r7, #16
 178 00dc 0021     		movs	r1, #0
 179 00de 1846     		mov	r0, r3
 180 00e0 FFF7FEFF 		bl	lis2dw12_tap_mode_set
 146:Core/Src/lis2dw12_tap_single.c ****   /* Enable single tap detection interrupt */
 147:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_pin_int1_route_get(&dev_ctx, &int_route.ctrl4_int1_pad_ctrl);
 181              		.loc 1 147 3
 182 00e4 07F10C02 		add	r2, r7, #12
 183 00e8 07F11003 		add	r3, r7, #16
 184 00ec 1146     		mov	r1, r2
 185 00ee 1846     		mov	r0, r3
 186 00f0 FFF7FEFF 		bl	lis2dw12_pin_int1_route_get
 148:Core/Src/lis2dw12_tap_single.c ****   int_route.ctrl4_int1_pad_ctrl.int1_single_tap = PROPERTY_ENABLE;
 187              		.loc 1 148 49
 188 00f4 3B7B     		ldrb	r3, [r7, #12]
 189 00f6 43F04003 		orr	r3, r3, #64
 190 00fa 3B73     		strb	r3, [r7, #12]
 149:Core/Src/lis2dw12_tap_single.c ****   lis2dw12_pin_int1_route_set(&dev_ctx, &int_route.ctrl4_int1_pad_ctrl);
 191              		.loc 1 149 3
 192 00fc 07F10C02 		add	r2, r7, #12
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 7


 193 0100 07F11003 		add	r3, r7, #16
 194 0104 1146     		mov	r1, r2
 195 0106 1846     		mov	r0, r3
 196 0108 FFF7FEFF 		bl	lis2dw12_pin_int1_route_set
 197              	.L8:
 198              	.LBB2:
 150:Core/Src/lis2dw12_tap_single.c **** 
 151:Core/Src/lis2dw12_tap_single.c ****   /* Wait Events */
 152:Core/Src/lis2dw12_tap_single.c ****   while (1) {
 153:Core/Src/lis2dw12_tap_single.c ****     lis2dw12_all_sources_t all_source;
 154:Core/Src/lis2dw12_tap_single.c ****     /* Check Single Tap events */
 155:Core/Src/lis2dw12_tap_single.c ****     lis2dw12_all_sources_get(&dev_ctx, &all_source);
 199              		.loc 1 155 5
 200 010c 3A1D     		adds	r2, r7, #4
 201 010e 07F11003 		add	r3, r7, #16
 202 0112 1146     		mov	r1, r2
 203 0114 1846     		mov	r0, r3
 204 0116 FFF7FEFF 		bl	lis2dw12_all_sources_get
 156:Core/Src/lis2dw12_tap_single.c **** 
 157:Core/Src/lis2dw12_tap_single.c ****     if (all_source.tap_src.single_tap) {
 205              		.loc 1 157 9
 206 011a BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 207 011c 03F02003 		and	r3, r3, #32
 208 0120 DBB2     		uxtb	r3, r3
 209              		.loc 1 157 8
 210 0122 002B     		cmp	r3, #0
 211 0124 F2D0     		beq	.L8
 158:Core/Src/lis2dw12_tap_single.c ****       uart_PrintString("Tap detected on: "); 
 212              		.loc 1 158 7
 213 0126 1F48     		ldr	r0, .L9+24
 214 0128 FFF7FEFF 		bl	uart_PrintString
 159:Core/Src/lis2dw12_tap_single.c ****       uart_PrintInt(all_source.tap_src.tap_sign, 10);
 215              		.loc 1 159 39
 216 012c BB79     		ldrb	r3, [r7, #6]
 217 012e C3F3C003 		ubfx	r3, r3, #3, #1
 218 0132 DBB2     		uxtb	r3, r3
 219              		.loc 1 159 7
 220 0134 0A21     		movs	r1, #10
 221 0136 1846     		mov	r0, r3
 222 0138 FFF7FEFF 		bl	uart_PrintInt
 160:Core/Src/lis2dw12_tap_single.c ****       uart_PrintString("\r\n");
 223              		.loc 1 160 7
 224 013c 1A48     		ldr	r0, .L9+28
 225 013e FFF7FEFF 		bl	uart_PrintString
 161:Core/Src/lis2dw12_tap_single.c **** 
 162:Core/Src/lis2dw12_tap_single.c ****       if (all_source.tap_src.x_tap) {
 226              		.loc 1 162 11
 227 0142 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 228 0144 03F00403 		and	r3, r3, #4
 229 0148 DBB2     		uxtb	r3, r3
 230              		.loc 1 162 10
 231 014a 002B     		cmp	r3, #0
 232 014c 05D0     		beq	.L6
 163:Core/Src/lis2dw12_tap_single.c ****         uart_PrintString("x");
 233              		.loc 1 163 9
 234 014e 1748     		ldr	r0, .L9+32
 235 0150 FFF7FEFF 		bl	uart_PrintString
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 8


 164:Core/Src/lis2dw12_tap_single.c ****         //uart_PrintInt(all_source.tap_src.x_tap, 10);
 165:Core/Src/lis2dw12_tap_single.c ****         uart_PrintString("\r\n");
 236              		.loc 1 165 9
 237 0154 1448     		ldr	r0, .L9+28
 238 0156 FFF7FEFF 		bl	uart_PrintString
 239              	.L6:
 166:Core/Src/lis2dw12_tap_single.c ****       }
 167:Core/Src/lis2dw12_tap_single.c **** 
 168:Core/Src/lis2dw12_tap_single.c ****       if (all_source.tap_src.y_tap) {
 240              		.loc 1 168 11
 241 015a BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 242 015c 03F00203 		and	r3, r3, #2
 243 0160 DBB2     		uxtb	r3, r3
 244              		.loc 1 168 10
 245 0162 002B     		cmp	r3, #0
 246 0164 05D0     		beq	.L7
 169:Core/Src/lis2dw12_tap_single.c ****         uart_PrintString("y");
 247              		.loc 1 169 9
 248 0166 1248     		ldr	r0, .L9+36
 249 0168 FFF7FEFF 		bl	uart_PrintString
 170:Core/Src/lis2dw12_tap_single.c ****         //uart_PrintInt(all_source.tap_src.y_tap, 10);
 171:Core/Src/lis2dw12_tap_single.c ****         uart_PrintString("\r\n");
 250              		.loc 1 171 9
 251 016c 0E48     		ldr	r0, .L9+28
 252 016e FFF7FEFF 		bl	uart_PrintString
 253              	.L7:
 172:Core/Src/lis2dw12_tap_single.c ****       }
 173:Core/Src/lis2dw12_tap_single.c **** 
 174:Core/Src/lis2dw12_tap_single.c ****       if (all_source.tap_src.z_tap) {
 254              		.loc 1 174 11
 255 0172 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 256 0174 03F00103 		and	r3, r3, #1
 257 0178 DBB2     		uxtb	r3, r3
 258              		.loc 1 174 10
 259 017a 002B     		cmp	r3, #0
 260 017c C6D0     		beq	.L8
 175:Core/Src/lis2dw12_tap_single.c ****         uart_PrintString("z");
 261              		.loc 1 175 9
 262 017e 0D48     		ldr	r0, .L9+40
 263 0180 FFF7FEFF 		bl	uart_PrintString
 176:Core/Src/lis2dw12_tap_single.c ****         //uart_PrintInt(all_source.tap_src.z_tap, 10);
 177:Core/Src/lis2dw12_tap_single.c ****         uart_PrintString("\r\n");
 264              		.loc 1 177 9
 265 0184 0848     		ldr	r0, .L9+28
 266 0186 FFF7FEFF 		bl	uart_PrintString
 267              	.LBE2:
 152:Core/Src/lis2dw12_tap_single.c ****     lis2dw12_all_sources_t all_source;
 268              		.loc 1 152 13
 269 018a BFE7     		b	.L8
 270              	.L10:
 271              		.align	2
 272              	.L9:
 273 018c 00000000 		.word	platform_write
 274 0190 00000000 		.word	platform_read
 275 0194 00000000 		.word	platform_delay
 276 0198 00000000 		.word	hi2c2
 277 019c 00000000 		.word	whoamI
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 9


 278 01a0 00000000 		.word	rst
 279 01a4 00000000 		.word	.LC0
 280 01a8 14000000 		.word	.LC1
 281 01ac 18000000 		.word	.LC2
 282 01b0 1C000000 		.word	.LC3
 283 01b4 20000000 		.word	.LC4
 284              		.cfi_endproc
 285              	.LFE68:
 287              		.section	.text.platform_write,"ax",%progbits
 288              		.align	1
 289              		.syntax unified
 290              		.thumb
 291              		.thumb_func
 293              	platform_write:
 294              	.LFB69:
 178:Core/Src/lis2dw12_tap_single.c ****       }
 179:Core/Src/lis2dw12_tap_single.c **** 
 180:Core/Src/lis2dw12_tap_single.c ****       //tx_com(tx_buffer, strlen((char const *)tx_buffer));
 181:Core/Src/lis2dw12_tap_single.c ****     }
 182:Core/Src/lis2dw12_tap_single.c ****   }
 183:Core/Src/lis2dw12_tap_single.c **** }
 184:Core/Src/lis2dw12_tap_single.c **** 
 185:Core/Src/lis2dw12_tap_single.c **** /*
 186:Core/Src/lis2dw12_tap_single.c ****  * @brief  Write generic device register (platform dependent)
 187:Core/Src/lis2dw12_tap_single.c ****  *
 188:Core/Src/lis2dw12_tap_single.c ****  * @param  handle    customizable argument. In this examples is used in
 189:Core/Src/lis2dw12_tap_single.c ****  *                   order to select the correct sensor bus handler.
 190:Core/Src/lis2dw12_tap_single.c ****  * @param  reg       register to write
 191:Core/Src/lis2dw12_tap_single.c ****  * @param  bufp      pointer to data to write in register reg
 192:Core/Src/lis2dw12_tap_single.c ****  * @param  len       number of consecutive register to write
 193:Core/Src/lis2dw12_tap_single.c ****  *
 194:Core/Src/lis2dw12_tap_single.c ****  */
 195:Core/Src/lis2dw12_tap_single.c **** static int32_t platform_write(void *handle, uint8_t reg, const uint8_t *bufp,
 196:Core/Src/lis2dw12_tap_single.c ****   uint16_t len)
 197:Core/Src/lis2dw12_tap_single.c **** {
 295              		.loc 1 197 1
 296              		.cfi_startproc
 297              		@ args = 0, pretend = 0, frame = 16
 298              		@ frame_needed = 1, uses_anonymous_args = 0
 299 0000 80B5     		push	{r7, lr}
 300              	.LCFI3:
 301              		.cfi_def_cfa_offset 8
 302              		.cfi_offset 7, -8
 303              		.cfi_offset 14, -4
 304 0002 88B0     		sub	sp, sp, #32
 305              	.LCFI4:
 306              		.cfi_def_cfa_offset 40
 307 0004 04AF     		add	r7, sp, #16
 308              	.LCFI5:
 309              		.cfi_def_cfa 7, 24
 310 0006 F860     		str	r0, [r7, #12]
 311 0008 7A60     		str	r2, [r7, #4]
 312 000a 1A46     		mov	r2, r3
 313 000c 0B46     		mov	r3, r1
 314 000e FB72     		strb	r3, [r7, #11]
 315 0010 1346     		mov	r3, r2	@ movhi
 316 0012 3B81     		strh	r3, [r7, #8]	@ movhi
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 10


 198:Core/Src/lis2dw12_tap_single.c **** HAL_I2C_Mem_Write(handle, LIS2DW12_I2C_ADD_L, reg,
 317              		.loc 1 198 1
 318 0014 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 319 0016 9AB2     		uxth	r2, r3
 320 0018 4FF47A73 		mov	r3, #1000
 321 001c 0293     		str	r3, [sp, #8]
 322 001e 3B89     		ldrh	r3, [r7, #8]
 323 0020 0193     		str	r3, [sp, #4]
 324 0022 7B68     		ldr	r3, [r7, #4]
 325 0024 0093     		str	r3, [sp]
 326 0026 0123     		movs	r3, #1
 327 0028 3121     		movs	r1, #49
 328 002a F868     		ldr	r0, [r7, #12]
 329 002c FFF7FEFF 		bl	HAL_I2C_Mem_Write
 199:Core/Src/lis2dw12_tap_single.c **** I2C_MEMADD_SIZE_8BIT, (uint8_t*) bufp, len, 1000);
 200:Core/Src/lis2dw12_tap_single.c **** 
 201:Core/Src/lis2dw12_tap_single.c **** return 0;
 330              		.loc 1 201 8
 331 0030 0023     		movs	r3, #0
 202:Core/Src/lis2dw12_tap_single.c **** }
 332              		.loc 1 202 1
 333 0032 1846     		mov	r0, r3
 334 0034 1037     		adds	r7, r7, #16
 335              	.LCFI6:
 336              		.cfi_def_cfa_offset 8
 337 0036 BD46     		mov	sp, r7
 338              	.LCFI7:
 339              		.cfi_def_cfa_register 13
 340              		@ sp needed
 341 0038 80BD     		pop	{r7, pc}
 342              		.cfi_endproc
 343              	.LFE69:
 345              		.section	.text.platform_read,"ax",%progbits
 346              		.align	1
 347              		.syntax unified
 348              		.thumb
 349              		.thumb_func
 351              	platform_read:
 352              	.LFB70:
 203:Core/Src/lis2dw12_tap_single.c **** 
 204:Core/Src/lis2dw12_tap_single.c **** /*
 205:Core/Src/lis2dw12_tap_single.c **** * @brief  Read generic device register (platform dependent)
 206:Core/Src/lis2dw12_tap_single.c **** *
 207:Core/Src/lis2dw12_tap_single.c **** * @param  handle    customizable argument. In this examples is used in
 208:Core/Src/lis2dw12_tap_single.c **** *                   order to select the correct sensor bus handler.
 209:Core/Src/lis2dw12_tap_single.c **** * @param  reg       register to read
 210:Core/Src/lis2dw12_tap_single.c **** * @param  bufp      pointer to buffer that store the data read
 211:Core/Src/lis2dw12_tap_single.c **** * @param  len       number of consecutive register to read
 212:Core/Src/lis2dw12_tap_single.c **** *
 213:Core/Src/lis2dw12_tap_single.c **** */
 214:Core/Src/lis2dw12_tap_single.c **** static int32_t platform_read(void *handle, uint8_t reg, uint8_t *bufp,
 215:Core/Src/lis2dw12_tap_single.c ****  uint16_t len)
 216:Core/Src/lis2dw12_tap_single.c **** {
 353              		.loc 1 216 1
 354              		.cfi_startproc
 355              		@ args = 0, pretend = 0, frame = 16
 356              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 11


 357 0000 80B5     		push	{r7, lr}
 358              	.LCFI8:
 359              		.cfi_def_cfa_offset 8
 360              		.cfi_offset 7, -8
 361              		.cfi_offset 14, -4
 362 0002 88B0     		sub	sp, sp, #32
 363              	.LCFI9:
 364              		.cfi_def_cfa_offset 40
 365 0004 04AF     		add	r7, sp, #16
 366              	.LCFI10:
 367              		.cfi_def_cfa 7, 24
 368 0006 F860     		str	r0, [r7, #12]
 369 0008 7A60     		str	r2, [r7, #4]
 370 000a 1A46     		mov	r2, r3
 371 000c 0B46     		mov	r3, r1
 372 000e FB72     		strb	r3, [r7, #11]
 373 0010 1346     		mov	r3, r2	@ movhi
 374 0012 3B81     		strh	r3, [r7, #8]	@ movhi
 217:Core/Src/lis2dw12_tap_single.c **** HAL_I2C_Mem_Read(handle, LIS2DW12_I2C_ADD_L, reg,
 375              		.loc 1 217 1
 376 0014 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 377 0016 9AB2     		uxth	r2, r3
 378 0018 4FF47A73 		mov	r3, #1000
 379 001c 0293     		str	r3, [sp, #8]
 380 001e 3B89     		ldrh	r3, [r7, #8]
 381 0020 0193     		str	r3, [sp, #4]
 382 0022 7B68     		ldr	r3, [r7, #4]
 383 0024 0093     		str	r3, [sp]
 384 0026 0123     		movs	r3, #1
 385 0028 3121     		movs	r1, #49
 386 002a F868     		ldr	r0, [r7, #12]
 387 002c FFF7FEFF 		bl	HAL_I2C_Mem_Read
 218:Core/Src/lis2dw12_tap_single.c **** I2C_MEMADD_SIZE_8BIT, bufp, len, 1000);
 219:Core/Src/lis2dw12_tap_single.c **** 
 220:Core/Src/lis2dw12_tap_single.c **** return 0;
 388              		.loc 1 220 8
 389 0030 0023     		movs	r3, #0
 221:Core/Src/lis2dw12_tap_single.c **** }
 390              		.loc 1 221 1
 391 0032 1846     		mov	r0, r3
 392 0034 1037     		adds	r7, r7, #16
 393              	.LCFI11:
 394              		.cfi_def_cfa_offset 8
 395 0036 BD46     		mov	sp, r7
 396              	.LCFI12:
 397              		.cfi_def_cfa_register 13
 398              		@ sp needed
 399 0038 80BD     		pop	{r7, pc}
 400              		.cfi_endproc
 401              	.LFE70:
 403              		.section	.text.platform_delay,"ax",%progbits
 404              		.align	1
 405              		.syntax unified
 406              		.thumb
 407              		.thumb_func
 409              	platform_delay:
 410              	.LFB71:
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 12


 222:Core/Src/lis2dw12_tap_single.c **** 
 223:Core/Src/lis2dw12_tap_single.c **** /*
 224:Core/Src/lis2dw12_tap_single.c **** * @brief  Write generic device register (platform dependent)
 225:Core/Src/lis2dw12_tap_single.c **** *
 226:Core/Src/lis2dw12_tap_single.c **** * @param  tx_buffer     buffer to transmit
 227:Core/Src/lis2dw12_tap_single.c **** * @param  len           number of byte to send
 228:Core/Src/lis2dw12_tap_single.c **** *
 229:Core/Src/lis2dw12_tap_single.c **** */
 230:Core/Src/lis2dw12_tap_single.c **** 
 231:Core/Src/lis2dw12_tap_single.c **** /*
 232:Core/Src/lis2dw12_tap_single.c **** * @brief  platform specific delay (platform dependent)
 233:Core/Src/lis2dw12_tap_single.c **** *
 234:Core/Src/lis2dw12_tap_single.c **** * @param  ms        delay in ms
 235:Core/Src/lis2dw12_tap_single.c **** *
 236:Core/Src/lis2dw12_tap_single.c **** */
 237:Core/Src/lis2dw12_tap_single.c **** static void platform_delay(uint16_t ms)
 238:Core/Src/lis2dw12_tap_single.c **** {
 411              		.loc 1 238 1
 412              		.cfi_startproc
 413              		@ args = 0, pretend = 0, frame = 8
 414              		@ frame_needed = 1, uses_anonymous_args = 0
 415 0000 80B5     		push	{r7, lr}
 416              	.LCFI13:
 417              		.cfi_def_cfa_offset 8
 418              		.cfi_offset 7, -8
 419              		.cfi_offset 14, -4
 420 0002 82B0     		sub	sp, sp, #8
 421              	.LCFI14:
 422              		.cfi_def_cfa_offset 16
 423 0004 00AF     		add	r7, sp, #0
 424              	.LCFI15:
 425              		.cfi_def_cfa_register 7
 426 0006 0346     		mov	r3, r0
 427 0008 FB80     		strh	r3, [r7, #6]	@ movhi
 239:Core/Src/lis2dw12_tap_single.c **** HAL_Delay(ms);
 428              		.loc 1 239 1
 429 000a FB88     		ldrh	r3, [r7, #6]
 430 000c 1846     		mov	r0, r3
 431 000e FFF7FEFF 		bl	HAL_Delay
 240:Core/Src/lis2dw12_tap_single.c **** }
 432              		.loc 1 240 1
 433 0012 00BF     		nop
 434 0014 0837     		adds	r7, r7, #8
 435              	.LCFI16:
 436              		.cfi_def_cfa_offset 8
 437 0016 BD46     		mov	sp, r7
 438              	.LCFI17:
 439              		.cfi_def_cfa_register 13
 440              		@ sp needed
 441 0018 80BD     		pop	{r7, pc}
 442              		.cfi_endproc
 443              	.LFE71:
 445              		.text
 446              	.Letext0:
 447              		.file 2 "C:\\ST\\STM32CubeCLT_1.16.0\\GNU-tools-for-STM32\\bin/../lib/gcc/arm-none-eabi/12.3.1/../
 448              		.file 3 "C:\\ST\\STM32CubeCLT_1.16.0\\GNU-tools-for-STM32\\bin/../lib/gcc/arm-none-eabi/12.3.1/../
 449              		.file 4 "Core/Inc/lis2dw12_reg.h"
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 13


 450              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 451              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 452              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 453              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_i2c.h"
 454              		.file 9 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 455              		.file 10 "Core/Inc/uart.h"
ARM GAS  C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s 			page 14


DEFINED SYMBOLS
                            *ABS*:00000000 lis2dw12_tap_single.c
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:21     .bss.whoamI:00000000 whoamI
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:22     .bss.whoamI:00000000 $d
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:26     .bss.rst:00000000 rst
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:27     .bss.rst:00000000 $d
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:29     .bss.tx_buffer:00000000 $d
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:32     .bss.tx_buffer:00000000 tx_buffer
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:35     .rodata:00000000 $d
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:51     .text.lis2dw12_single_tap:00000000 $t
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:57     .text.lis2dw12_single_tap:00000000 lis2dw12_single_tap
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:409    .text.platform_delay:00000000 platform_delay
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:273    .text.lis2dw12_single_tap:0000018c $d
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:293    .text.platform_write:00000000 platform_write
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:351    .text.platform_read:00000000 platform_read
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:288    .text.platform_write:00000000 $t
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:346    .text.platform_read:00000000 $t
C:\Users\vct344\AppData\Local\Temp\cc4FhkZB.s:404    .text.platform_delay:00000000 $t

UNDEFINED SYMBOLS
lis2dw12_device_id_get
lis2dw12_reset_set
lis2dw12_reset_get
lis2dw12_full_scale_set
lis2dw12_power_mode_set
lis2dw12_data_rate_set
lis2dw12_tap_detection_on_z_set
lis2dw12_tap_detection_on_y_set
lis2dw12_tap_detection_on_x_set
lis2dw12_tap_threshold_x_set
lis2dw12_tap_threshold_y_set
lis2dw12_tap_threshold_z_set
lis2dw12_tap_quiet_set
lis2dw12_tap_shock_set
lis2dw12_tap_mode_set
lis2dw12_pin_int1_route_get
lis2dw12_pin_int1_route_set
lis2dw12_all_sources_get
uart_PrintString
uart_PrintInt
hi2c2
HAL_I2C_Mem_Write
HAL_I2C_Mem_Read
HAL_Delay
